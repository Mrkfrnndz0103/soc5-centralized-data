"use strict";(()=>{var e={};e.id=4728,e.ids=[4728],e.modules={72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8678:e=>{e.exports=import("pg")},92761:e=>{e.exports=require("node:async_hooks")},40421:(e,t,r)=>{r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{originalPathname:()=>g,patchFetch:()=>p,requestAsyncStorage:()=>l,routeModule:()=>c,serverHooks:()=>d,staticGenerationAsyncStorage:()=>h});var a=r(49303),n=r(88716),o=r(60670),i=r(68727),u=e([i]);i=(u.then?(await u)():u)[0];let c=new a.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/hubs/route",pathname:"/api/hubs",filename:"route",bundlePath:"app/api/hubs/route"},resolvedPagePath:"C:\\Users\\phlspxuser\\Documents\\Mrkcde\\Ongoing\\soc5-internalTool\\src\\app\\api\\hubs\\route.ts",nextConfigOutput:"",userland:i}),{requestAsyncStorage:l,staticGenerationAsyncStorage:h,serverHooks:d}=c,g="/api/hubs/route";function p(){return(0,o.patchFetch)({serverHooks:d,staticGenerationAsyncStorage:h})}s()}catch(e){s(e)}})},68727:(e,t,r)=>{r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{GET:()=>p,POST:()=>c});var a=r(87070),n=r(75748),o=r(95456),i=r(69026),u=e([n,o]);[n,o]=u.then?(await u)():u;let p=(0,i.g)("/api/hubs",async e=>{if(!await (0,o.Gg)())return a.NextResponse.json({error:"Unauthorized"},{status:401});let{searchParams:t}=new URL(e.url),r=Number(t.get("limit")||"10"),s=Number(t.get("offset")||"0"),i=t.get("active"),u=null===i?void 0:"true"===i,p=[],c=[];void 0!==u&&(c.push(u),p.push(`active = $${c.length}`));let l=p.length?`WHERE ${p.join(" AND ")}`:"",h=await (0,n.I)(`SELECT COUNT(*)::int AS total
     FROM outbound_map
     ${l}`,c),d=await (0,n.I)(`SELECT *
     FROM outbound_map
     ${l}
     ORDER BY hub_name
     LIMIT $${c.length+1}
     OFFSET $${c.length+2}`,[...c,r,s]);return a.NextResponse.json({hubs:d.rows,total:h.rows[0]?.total||0})}),c=(0,i.g)("/api/hubs",async e=>{if(!await (0,o.Gg)())return a.NextResponse.json({error:"Unauthorized"},{status:401});let t=await e.json().catch(()=>({})),r=Object.keys(t||{});if(0===r.length)return a.NextResponse.json({error:"hub data is required"},{status:400});let s=r.map(e=>`"${e}"`).join(", "),i=r.map((e,t)=>`$${t+1}`).join(", "),u=r.map(e=>t[e]),p=await (0,n.I)(`INSERT INTO outbound_map (${s})
     VALUES (${i})
     RETURNING *`,u);return a.NextResponse.json(p.rows[0])});s()}catch(e){s(e)}})}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[9276,5972,5456],()=>r(40421));module.exports=s})();